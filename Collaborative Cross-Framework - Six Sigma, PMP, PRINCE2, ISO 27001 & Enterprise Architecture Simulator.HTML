<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Architecture: Collaborative Cross-Framework (Six Sigma, PMP, PRINCE2 & ISO 27001) Simulator (V10) - Powered by Gemini</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
            box-sizing: border-box;
        }
        #simulator-container {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            width: 1020px; /* Wider for EA diagrams */
            max-width: 98%;
            padding: 2rem;
            box-sizing: border-box;
        }
        h1 {
            color: #1c3d5a;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 0.5rem;
            margin-top: 0;
            font-size: 1.8em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 .gemini-tag {
            font-size: 0.6em;
            color: #666;
            font-weight: normal;
            background-color: #e0e0e0;
            padding: 4px 8px;
            border-radius: 4px;
        }
        h2 {
            color: #007bff; /* Blue for Six Sigma focus */
            font-size: 1.3em;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }
        #network-animation {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: 'Courier New', Courier, monospace;
            padding: 1rem;
            border-radius: 6px;
            white-space: pre;
            font-size: 11px; /* Smaller to fit the gigantic EA diagram */
            overflow-x: auto;
            min-height: 380px; /* Taller for more info */
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        .section-title {
            font-weight: bold;
            color: #1c3d5a;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            font-size: 1.1em;
            display: flex;
            align-items: center;
        }
        .section-title.briefing-title::before {
            content: "📚 Scenario Overview: ";
            color: #007bff;
            margin-right: 5px;
        }
        .section-title.task-title::before {
            content: "❓ Your Collaborative Cross-Framework EA Challenge: ";
            color: #dc3545;
            margin-right: 5px;
        }

        .briefing, .step-description {
            margin: 0.5rem 0 1rem 0;
            line-height: 1.6;
            background-color: #e6f7ff;
            border-left: 4px solid #007bff;
            padding: 0.8rem 1rem;
            border-radius: 4px;
            min-height: 50px;
            display: flex;
            align-items: center;
        }
        .step-description {
            background-color: #f0fdf4;
            border-left-color: #28a745;
        }
        .task {
            margin: 0.5rem 0 1rem 0;
            font-weight: normal;
            font-size: 1em;
            color: #333;
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 0.8rem 1rem;
            border-radius: 4px;
            min-height: 50px;
            display: flex;
            align-items: center;
        }
        #choices {
            margin-top: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            text-align: left;
            transition: background-color 0.2s, transform 0.1s;
        }
        button:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #interaction-area {
            display: none;
        }
        .final-message {
            background-color: #d1ecf1;
            border-color: #bee5eb;
            color: #0c5460;
            padding: 1.5rem;
            text-align: center;
            font-size: 1.2rem;
            margin-top: 2rem;
        }
        .waiting-message {
            text-align: center;
            margin-top: 1rem;
            color: #555;
        }
    </style>
</head>
<body>

<div id="simulator-container">
    <h1>
        Enterprise Architecture: Collaborative Cross-Framework (Six Sigma, PMP, PRINCE2 & ISO 27001) Simulator (V10)
        <span class="gemini-tag">Powered by Gemini</span>
    </h1>
    <div id="step-content">
        <h2 class="framework-focus" id="framework-focus"></h2>
        <div class="section-title briefing-title"></div>
        <div class="briefing" id="briefing"></div>
        <pre id="network-animation"></pre>
        <div class="step-description" id="step-description"></div>
        <div id="interaction-area">
            <div class="section-title task-title"></div>
            <div class="task" id="task"></div>
            <div id="choices"></div>
        </div>
        <div class="waiting-message" id="waiting-message" style="display: none;">Animating concept... Please wait.</div>
    </div>
</div>

<script>
    // --- ANIMATION CONFIGURATION (Simplified for conceptual diagrams) ---
    const ANIMATION_DURATION_PER_FRAME = 2000; // Milliseconds per static conceptual frame

    // --- SIMULATOR DATA ---
    const scenarioSteps = {
        "start": {
            focus: "Welcome: The EA & Collaborative Cross-Framework Knowledge Base (V10)",
            briefing: "Welcome to OmniCorp's 'Digital Renaissance 2030'! As Chief Enterprise Architect, you'll lead a monumental transformation, integrating EA, Six Sigma DMAIC, PMP, PRINCE2, AND **ISO 27001 (Information Security Management)**. Our strategic objectives: cloud-native operations, AI-powered hyper-personalization, 30% operational cost reduction, and **a certified, robust information security posture**.",
            animatedSequence: [
                {
                    staticNetwork: `
                  ┌───────────────────────────────────────────────────────────┐
                  │           ENTERPRISE ARCHITECTURE (EA) OVERVIEW         │
                  │ (Business, Data, Application, Technology Layers)          │
                  │   Guiding "Digital Renaissance 2030" Transformation     │
                  └───────────────┬───────────────────────┬───────────────────┐
                                  │                       │
          ┌───────────────────────V───────────────────────V───────────────────────┐
          │                                                                       │
          │  PRINCE2 GOVERNANCE             PMP PROGRAM MANAGEMENT        SIX SIGMA DMAIC        │
          │ (Strategic Oversight, Bus Just., (Scope, Schedule, Resources, (Data-Driven Process  │
          │  Controlled Stages, Benefits)    Stakeholders, Risks)       Improvement, Metrics)  │
          └───────────────────────┬───────────────────────┬───────────────────────┘
                                  │                       │
                                  V                       V
                      ┌───────────────────────────────────────────────────┐
                      │        [ISO 27001: INFORMATION SECURITY]          │
                      │ (ISMS Scope, Policy, Risk Mgmt, Controls, Continual Improvement)│
                      └───────────────────────────────────────────────────┘
                                  │
                                  V
                      ┌───────────────────────────────────────────────────┐
                      │    INTEGRATED EA TRANSFORMATION LIFECYCLE         │
                      │ (Vision, Current State, Target State, Roadmap, Governance) │
                      └───────────────────────────────────────────────────┘
    
    (The Gigantic Collaborative Cross-Framework & EA Ecosystem for OmniCorp - with ISO 27001)`,
                    description: "This comprehensive diagram illustrates EA as the overarching structure, supported by PRINCE2's governance, PMP's program management, Six Sigma's data-driven improvement, and critically, **ISO 27001's information security management**. Together, they drive OmniCorp's 'Digital Renaissance 2030' transformation with security embedded from the start.",
                    duration: 6000
                }
            ],
            task: "Our journey begins by establishing the strategic vision, foundational governance, and the crucial information security context for OmniCorp's 'Digital Renaissance 2030'. This requires deep integration of EA, PRINCE2, PMP, Six Sigma 'Define' thinking, and **ISO 27001's ISMS scope definition**. Click 'Continue' to face your first strategic challenge.",
            choices: [
                {
                    text: "Continue to 'EA Vision, Business Arch. & ISO 27001 ISMS Scope' Phase",
                    outcomeBriefing: "An integrated start ensures that the EA transformation is not just technically sound, but also strategically justified, formally governed, focused on measurable business value, **and underpinned by a clear information security mandate**.",
                    nextStepId: "scenario1_ea_vision_define"
                }
            ]
        },
        "scenario1_ea_vision_define": {
            focus: "Phase 1: EA Vision, Business Arch. & ISO 27001 ISMS Scope (PRINCE2/PMP/Define)",
            briefing: "As CEA, you must articulate the 'Digital Renaissance 2030' vision, define key business capabilities, and establish a high-level Target Business Architecture. This phase requires formal program initiation (PRINCE2), clear strategic alignment (PMP), defining CTQ business outcomes (Six Sigma 'Define'), **and crucially, defining the ISMS scope, context, and information security policy (ISO 27001)**.",
            animatedSequence: [
                {
                    staticNetwork: `
                  ┌───────────────────────────────────────────────────────────┐
                  │    [EA: BUSINESS ARCHITECTURE / STRATEGIC VISION]       │
                  │ (Future State Capabilities, Value Streams, Business Goals)│
                  └───────┬────────────────────────────────────────────┬───────┘
                          │                      │
                  ┌───────V───────────────┐      │  (Sets Program Scope)
                  │   [PRINCE2: SU/DP]    │      │
                  │ (Business Case, Project Brief, Project Mandate for Program)│
                  └───────┬───────────────┘      │
                          │ (Strategic Justification & Governance)
                  ┌───────V───────────────┐      │
                  │   [PMP: INITIATING]   │      │
                  │ (Program Charter, High-level Stakeholder Reg., Benefits Mgmt Plan)│
                  └───────┬───────────────┘      │
                          │ (Defines Program Context & Key Deliverables)
                  ┌───────V──────────────────────V───────┐
                  │    [SIX SIGMA DMAIC: D E F I N E]    │
                  │  (High-level CTQs for Business Outcomes: e.g., <5s customer journey,  │
                  │   20% faster new product launch, 99.9% data accuracy)    │
                  │  (Problem/Opportunity: OmniCorp's current agility/cost/CX gaps)   │
                  └───────┬───────────────────────────────────────────────────┘
                          │
                  ┌───────V───────────────────────────────────────────────────┐
                  │   [ISO 27001: DEFINE (ISMS)]                              │
                  │  (Establish ISMS Scope, Context of Org., Info Security Policy,  │
                  │   Interested Parties & Requirements, Top Management Commitment) │
                  └───────────────────────────────────────────────────────────┘
    
    (Collaboratively Defining the EA Transformation Program: Strategic, Managerial, Process & Security Focus)`,
                    description: "This foundational phase integrates EA's vision, PRINCE2's governance, PMP's program charter, Six Sigma's CTQs, and **ISO 27001's critical ISMS definition steps**, ensuring information security is embedded from the outset.",
                    duration: 4000
                }
            ],
            task: "To successfully initiate 'Digital Renaissance 2030', ensuring comprehensive strategic alignment and robust security foundations, which action best integrates EA vision with cross-framework governance and definition, including ISO 27001?",
            choices: [
                {
                    text: "Develop a 'Target Business Architecture' (EA) outlining future capabilities. Define the 'ISMS Scope' (ISO 27001) for critical business areas, identifying relevant legal/regulatory requirements. Present a 'Program Business Case' (PRINCE2) to the Board, incorporating 'Program CTQs' (Six Sigma) like '30% cost reduction' and '99.9% data confidentiality'. Secure approval of the 'Program Charter' (PMP) which encompasses the EA vision, ISMS scope, and an 'Information Security Policy' (ISO 27001).",
                    outcomeBriefing: "Excellent! This action seamlessly integrates all frameworks. The 'Target Business Architecture' (EA) provides strategic direction. ISO 27001's 'ISMS Scope' defines the security boundaries, and the 'Information Security Policy' sets the overarching security intent. PRINCE2's 'Program Business Case' ensures board-level buy-in. PMP's 'Program Charter' formalizes the initiative. Six Sigma's CTQs make business and **security outcomes** measurable. This holistic approach ensures strategic alignment, formal authorization, measurable objectives, **and a foundational commitment to information security from day one**.",
                    nextStepId: "scenario2_ea_current_measure"
                },
                {
                    text: "Immediately start designing cloud infrastructure (EA Tech Arch) based on general assumptions, and form a small agile team without formal program initiation, business case, or any consideration for an ISMS.",
                    outcomeBriefing: "This approach is premature and carries significant risks from all perspectives. It bypasses strategic business alignment (EA, PRINCE2), lacks formal authorization and stakeholder engagement (PMP), skips defining measurable objectives (Six Sigma), and completely neglects the fundamental requirements of ISO 27001 for a structured ISMS. Starting with technology without a clear business vision, formal governance, and **security by design** often leads to misaligned solutions, rework, and critical security vulnerabilities, undermining the entire transformation. The collaborative power is completely lost here.",
                    nextStepId: "scenario2_ea_current_measure"
                }
            ]
        },
        "scenario2_ea_current_measure": {
            focus: "Phase 2: EA Current State Arch. & ISO 27001 Risk Assessment (Measure)",
            briefing: "With a defined vision and ISMS scope, you must now understand OmniCorp's 'as-is' state across all EA layers (Business, Data, Application, Technology). This involves rigorous data collection (PMP), establishing baseline performance metrics (Six Sigma 'Measure'), documenting the current architecture (EA), **and crucially, conducting an information security risk assessment (ISO 27001) to identify current threats and vulnerabilities**.",
            animatedSequence: [
                {
                    staticNetwork: `
                  ┌───────────────────────────────────────────────────────────┐
                  │     [EA: CURRENT STATE ARCHITECTURE DOCUMENTATION]      │
                  │ (As-Is Business Processes, Data Models, Application Inventory,   │
                  │  Technology Stack, Infrastructure Footprint)             │
                  └───────┬────────────────────────────────────────────┬───────┘
                          │                      │
                  ┌───────V───────────────┐      │
                  │   [PRINCE2: IP/CS]    │      │
                  │ (Quality Mgmt Approach for Arch. artifacts, Stage Control)│
                  └───────┬───────────────┘      │
                          │ (Ensures Arch. doc quality)
                  ┌───────V───────────────┐      │
                  │    [PMP: PLANNING]    │      │
                  │ (Data Collection Plan, Scope Baseline, Resource Plan for Analysis)│
                  └───────┬───────────────┘      │
                          │ (Structured approach to data/artifact gathering)
                  ┌───────V──────────────────────V───────┐
                  │    [SIX SIGMA DMAIC: M E A S U R E]  │
                  │  (Baseline Metrics: Avg. Process Cycle Time, Data Duplication Rate,  │
                  │   Application Uptime, Infrastructure Cost/Txn)          │
                  │  (Tools: Process Mapping, Arch. Inventory, Performance Reports)   │
                  └───────┬───────────────────────────────────────────────────┘
                          │
                  ┌───────V───────────────────────────────────────────────────┐
                  │   [ISO 27001: MEASURE (ISMS Risk Assessment)]             │
                  │  (Identify Assets, Threats, Vulnerabilities, Assess Risks  │
                  │   against established criteria, Evaluate existing controls)│
                  └───────────────────────────────────────────────────────────┘
    
    (Collaboratively Measuring: EA Baseline, Data Quality, Planning & Security Risk Profile)`,
                    description: "This phase leverages EA for comprehensive 'as-is' documentation. PRINCE2 ensures quality of architectural artifacts. PMP provides the structured plan. Six Sigma guides baseline performance metrics. **ISO 27001 drives the crucial information security risk assessment**, identifying threats, vulnerabilities, and evaluating existing controls.",
                    duration: 4000
                }
            ],
            task: "To establish a reliable current state architecture and performance baseline, while simultaneously understanding OmniCorp's information security risk profile, which action best demonstrates collaborative cross-framework EA knowledge, including ISO 27001?",
            choices: [
                {
                    text: "Initiate 'Current State Architecture' workshops (EA) across all domains, leading to 'Architecture Description Documents'. Conduct a comprehensive 'Information Security Risk Assessment' (ISO 27001) within the defined ISMS scope, identifying key assets, threats, vulnerabilities, and current control effectiveness. Develop a 'Data Collection Plan' (PMP) to gather baseline operational and security metrics (Six Sigma 'Measure'), ensuring data validity with PRINCE2 'Quality Criteria'.",
                    outcomeBriefing: "Outstanding! This choice exemplifies deep cross-framework and EA collaboration, with security fully integrated. The EA workshops drive comprehensive 'as-is' documentation. ISO 27001's 'Risk Assessment' proactively identifies security weaknesses and impacts. PMP's 'Data Collection Plan' provides the structured approach for gathering both operational and **security-related quantitative data**. PRINCE2's 'Quality Criteria' ensure all artifacts are reliable. Six Sigma's 'Measure' phase uses this robust baseline for objective analysis. This integrated approach creates a solid, secure foundation for transformation.",
                    nextStepId: "scenario3_ea_gap_analyze"
                },
                {
                    text: "Rely solely on existing, often outdated, architecture diagrams and anecdotal evidence from IT teams, ignoring any formal security risk assessment, and declaring them sufficient for the baseline.",
                    outcomeBriefing: "This approach is fundamentally flawed and undermines the entire transformation. Six Sigma demands accurate, measured data. EA requires a clear, comprehensive understanding of the current state. PMP cannot effectively plan or control without reliable information. PRINCE2's principle of 'Focus on Products' is violated. **Crucially, by ignoring ISO 27001's risk assessment, you leave OmniCorp vulnerable to unmanaged information security risks, potentially leading to breaches, non-compliance, and severe reputational and financial damage.** This will lead to designing solutions for unverified problems and cause significant rework later.",
                    nextStepId: "scenario3_ea_gap_analyze"
                }
            ]
        },
        "scenario3_ea_gap_analyze": {
            focus: "Phase 3: EA Gap Analysis, Target Arch. & ISO 27001 Risk Treatment (Analyze)",
            briefing: "With current state documented and baselines established, you must now identify the gaps between 'as-is' and 'to-be' architectures, analyze the root causes of underperformance and security risks, and design the detailed 'Target Architecture' across all layers. This involves Six Sigma's analytical prowess, PMP's planning, PRINCE2's issue management, **and ISO 27001's risk treatment planning and control selection**.",
            animatedSequence: [
                {
                    staticNetwork: `
                  ┌───────────────────────────────────────────────────────────┐
                  │    [EA: GAP ANALYSIS & TARGET ARCHITECTURE DESIGN]      │
                  │ (Identify deficiencies, Root Causes, Design To-Be Business, Data,│
                  │  Application, Technology Architectures)                  │
                  └───────┬────────────────────────────────────────────┬───────┘
                          │                      │
                  ┌───────V───────────────┐      │
                  │   [PRINCE2: CS/SB]    │      │
                  │ (Issue Management for Arch. Gaps, Exception Reports)     │
                  └───────┬───────────────┘      │
                          │ (Governs Architectural & Security Issues)
                  ┌───────V───────────────┐      │
                  │    [PMP: PLANNING]    │      │
                  │ (Risk Mgmt Plan, Resource Plan for Design, Scope Refinement)│
                  └───────┬───────────────┘      │
                          │ (Plans for design activities & manages risks)
                  ┌───────V──────────────────────V───────┐
                  │    [SIX SIGMA DMAIC: A N A L Y Z E]  │
                  │  (Tools: Gap Analysis Matrix, Root Cause Analysis (5 Whys/Fishbone),│
                  │   Statistical Correlation, Value Stream Mapping)         │
                  │  (Output: Quantified Gaps, Prioritized Root Causes for architectural flaws)│
                  └───────┬───────────────────────────────────────────────────┘
                          │
                  ┌───────V───────────────────────────────────────────────────┐
                  │   [ISO 27001: ANALYZE (ISMS Risk Treatment)]              │
                  │  (Develop Risk Treatment Plan, Select Controls from Annex A,│
                  │   Develop Statement of Applicability (SoA), Define Control Objectives)│
                  └───────────────────────────────────────────────────────────┘
    
    (Collaboratively Analyzing: EA Gaps, Root Causes, Target Design & Security Risk Treatment)`,
                    description: "In 'Analyze', EA drives gap identification and target architecture design. Six Sigma provides analytical tools for root causes. PMP manages planning and risks. PRINCE2 governs issues. **ISO 27001 guides the development of the Risk Treatment Plan and the selection of appropriate security controls (Annex A)**, integrating security directly into the architectural blueprint.",
                    duration: 4000
                }
            ],
            task: "You've identified 'fragmented data silos' and 'monolithic legacy applications' as key architectural root causes hindering agility and driving up costs, which also pose significant information security risks (e.g., data leakage, insecure APIs). How do you confirm these findings and integrate them into your target architecture design and program management, while satisfying ISO 27001's risk treatment requirements?",
            choices: [
                {
                    text: "Perform a 'Root Cause Analysis' (Six Sigma) on data fragmentation, application dependencies, AND security vulnerabilities. Document these as 'Architectural Deficiencies' (EA) and 'Information Security Risks' (ISO 27001). Develop a 'Risk Treatment Plan' (ISO 27001) to address high-priority security risks, selecting relevant controls from Annex A. Update the 'Program Issue Register' (PRINCE2) and 'Program Risk Register' (PMP) with these findings, refining the 'Target Data and Application Architectures' (EA) to incorporate the new security controls and mitigation strategies.",
                    outcomeBriefing: "Excellent! This action is a prime example of collaborative cross-framework knowledge in EA, with ISO 27001 deeply integrated. Six Sigma's RCA provides robust analytical depth for both operational and security issues. Documenting 'Architectural Deficiencies' (EA) and 'Information Security Risks' (ISO 27001) formalizes the problems. ISO 27001's 'Risk Treatment Plan' ensures a structured approach to mitigating security risks. Updating PRINCE2's 'Program Issue Register' and PMP's 'Program Risk Register' ensures governance and proactive management. Refining the 'Target Architectures' (EA) directly incorporates the learning and the **required security controls**, leading to robust, secure architectural solutions.",
                    nextStepId: "scenario4_ea_roadmap_improve"
                },
                {
                    text: "Assume the identified architectural and security issues are correct, and immediately jump to solutioning by proposing new cloud services, bypassing formal analysis, security risk treatment, or risk assessment updates.",
                    outcomeBriefing: "This shortcut undermines the analytical rigor of all frameworks and is particularly dangerous for information security. Without Six Sigma's validated root causes and ISO 27001's 'Risk Treatment Plan', EA solutions might address symptoms, not underlying issues, and critical security risks will remain unmitigated. PMP's risk management is ignored, inviting program failure. PRINCE2's 'Manage by Exception' requires formal reporting of significant issues. Jumping to solutions without proper analysis, formal integration of security findings, and a clear risk treatment strategy is a recipe for expensive architectural rework, system instability, and **catastrophic security breaches**, completely undermining the 'Analyze' phase.",
                    nextStepId: "scenario4_ea_roadmap_improve"
                }
            ]
        },
        "scenario4_ea_roadmap_improve": {
            focus: "Phase 4: EA Roadmap, Implementation & ISO 27001 Control Implementation (Improve)",
            briefing: "With a defined Target Architecture and Risk Treatment Plan, your focus shifts to planning the transition, managing solution implementation, and executing the architectural roadmap. This phase integrates Six Sigma's solution design, PMP's execution and resource management, PRINCE2's controlled delivery, **and ISO 27001's implementation of chosen security controls and associated procedures**.",
            animatedSequence: [
                {
                    staticNetwork: `
                  ┌───────────────────────────────────────────────────────────┐
                  │    [EA: ARCHITECTURAL ROADMAP & TRANSITION PLANNING]    │
                  │ (Phased Implementation, Migration Strategies, Capability Realization)│
                  └───────┬────────────────────────────────────────────┬───────┘
                          │                      │
                  ┌───────V───────────────┐      │
                  │   [PRINCE2: CS/MP]    │      │
                  │ (Authorize Work Packages for Arch. increments, Manage by Exception, Quality Check)│
                  └───────┬───────────────┘      │
                          │ (Controlled delivery of architectural "products" & security solutions)
                  ┌───────V───────────────┐      │
                  │    [PMP: EXECUTING]   │      │
                  │ (Direct & Manage Program Work, Acquire Resources for projects,   │
                  │  Perform Integrated Change Control)                  │
                  └───────┬───────────────┘      │
                          │ (Manages overall execution of transformation & security projects)
                  ┌───────V──────────────────────V───────┐
                  │    [SIX SIGMA DMAIC: I M P R O V E]  │
                  │  (Solutions: Implement Cloud-Native Platform, Data Lake, Microservices,│
                  │   Automated CI/CD, Process Re-engineering)              │
                  │  (Pilot & Validate architectural components against CTQs)   │
                  └───────┬───────────────────────────────────────────────────┘
                          │
                  ┌───────V───────────────────────────────────────────────────┐
                  │   [ISO 27001: IMPROVE (ISMS Control Implementation)]      │
                  │  (Implement selected security controls (Annex A), Security Testing,│
                  │   Document operational procedures, Integrate Incident Response)│
                  └───────────────────────────────────────────────────────────┘
    
    (Collaboratively Improving: EA Roadmap, Execution, Solution Validation & Security Control Implementation)`,
                    description: "In 'Improve', EA defines the roadmap. Six Sigma designs and validates solutions. PMP manages project execution. PRINCE2 provides controlled delivery. **ISO 27001 ensures the effective implementation of selected security controls, rigorous security testing, and the integration of information security procedures across the transformed enterprise.**",
                    duration: 4000
                }
            ],
            task: "To successfully implement the architectural roadmap, replacing legacy applications with cloud-native microservices and consolidating data silos, while ensuring all ISO 27001-mandated security controls are effectively deployed, what is the most comprehensive collaborative cross-framework EA action?",
            choices: [
                {
                    text: "Define 'Architectural Work Packages' (PRINCE2 'Products') for microservice development and data platform build, complete with 'Product Descriptions' (EA) that detail both functional and **security requirements (ISO 27001 controls)**. Authorize these as projects, assigning dedicated teams and resources (PMP 'Acquire Resources'). Manage their execution (PMP 'Direct & Manage Project Work'), ensuring each architectural increment is rigorously validated against Six Sigma CTQs (e.g., latency, scalability, data consistency) **and undergoes thorough security testing (e.g., penetration testing, vulnerability scanning) to verify ISO 27001 control effectiveness**.",
                    outcomeBriefing: "Excellent! This action is the epitome of cross-framework and EA collaboration, with ISO 27001 fully embedded. PRINCE2's 'Work Packages' provide controlled delivery for architectural 'products'. PMP ensures resource allocation and execution. EA's 'Product Descriptions' ensure clarity of deliverables, including **explicit security requirements**. Six Sigma's validation scientifically proves operational effectiveness. **Crucially, the integration of thorough security testing directly verifies the implementation and effectiveness of ISO 27001 controls**, ensuring the transformation yields tangible, measurable benefits AND a secure architecture.",
                    nextStepId: "scenario5_ea_governance_control"
                },
                {
                    text: "Push for rapid development and deployment of new architectural components, prioritizing speed over rigorous testing, formal handover, or alignment with the broader architectural roadmap, and only conduct basic functional testing, deferring security testing to a later, separate project.",
                    outcomeBriefing: "This 'move fast and break things' approach is highly detrimental in an EA and especially an information security context. It violates PRINCE2's 'Focus on Products' and 'Quality Criteria'. It sidesteps PMP's quality management and change control. It fails Six Sigma's validation. **Most importantly, by deferring and de-prioritizing security testing and control verification, you are introducing significant unmitigated security risks, failing to meet ISO 27001 requirements, and potentially deploying vulnerable systems into production.** Rushing architectural changes without controlled implementation, validation, and **embedded security assurance** often leads to technical debt, system instability, and failure to achieve the desired secure transformation, completely undermining the 'Improve' phase.",
                    nextStepId: "scenario5_ea_governance_control"
                }
            ]
        },
        "scenario5_ea_governance_control": {
            focus: "Phase 5: EA Governance, Benefits Realization & ISO 27001 Continual Improvement (Control)",
            briefing: "With the 'Digital Renaissance 2030' program delivering architectural improvements, the 'Control' phase focuses on sustaining gains, establishing ongoing EA governance, and realizing strategic benefits. This involves Six Sigma's ongoing monitoring, PMP's formal program closure, PRINCE2's benefits realization and final closure processes, **and ISO 27001's requirements for ISMS monitoring, review, internal audits, and continual improvement**.",
            animatedSequence: [
                {
                    staticNetwork: `
                  ┌───────────────────────────────────────────────────────────┐
                  │           [EA: ARCHITECTURE GOVERNANCE & LIFECYCLE]       │
                  │ (Architecture Review Board, Standards, Principles, Tooling)│
                  │          [EA: BENEFITS REALIZATION MONITORING]          │
                  │ (Track attainment of strategic objectives post-transformation)│
                  └───────┬────────────────────────────────────────────┬───────┘
                          │                      │
                  ┌───────V───────────────┐      │
                  │   [PRINCE2: CP/DP]    │      │
                  │ (Confirm Benefits, Project Closure, Lessons Learned,   │
                  │  Benefits Review Plan for program)                   │
                  └───────┬───────────────┘      │
                          │ (Ensures sustained benefits & formal program closure)
                  ┌───────V───────────────┐      │
                  │    [PMP: CLOSING]     │      │
                  │ (Close Program, Lessons Learned, Update Organizational   │
                  │  Process Assets/EA Repository)                       │
                  └───────┬───────────────┘      │
                          │ (Formalizes program completion & knowledge capture)
                  ┌───────V──────────────────────V───────┐
                  │    [SIX SIGMA DMAIC: C O N T R O L]  │
                  │  (Tools: Statistical Process Control (SPC) for key metrics,   │
                  │          Control Plan for architectural standards, Ongoing Audits) │
                  │  (Output: Sustainable Architecture, Measurable Benefits,   │
                  │           Transformed Enterprise)                       │
                  └───────┬───────────────────────────────────────────────────┘
                          │
                  ┌───────V───────────────────────────────────────────────────┐
                  │   [ISO 27001: CONTROL (ISMS Maintenance & Improvement)]   │
                  │  (Internal Audits, Management Review, Corrective Actions,  │
                  │   Monitoring & Measurement of ISMS Performance, Continual Improvement)│
                  └───────────────────────────────────────────────────────────┘
    
    (Collaboratively Controlling: EA Governance, Benefits, Sustainment & ISMS Continual Improvement)`,
                    description: "In 'Control', EA establishes enduring governance. Six Sigma's tools ensure sustained performance. PMP formalizes program closure. PRINCE2 ensures benefits are reviewed. **ISO 27001 mandates ongoing ISMS monitoring, internal audits, management review, and a structured approach to continual improvement, ensuring sustained information security and compliance**.",
                    duration: 4000
                }
            ],
            task: "To ensure the transformed 'Digital Renaissance 2030' architecture delivers sustained value and maintains its robust information security posture, and the program is formally closed, what is the most comprehensive collaborative cross-framework EA action, including ISO 27001?",
            choices: [
                {
                    text: "Establish an 'Architecture Review Board' (EA) and a 'Control Plan' (Six Sigma) for key operational and **security performance indicators (e.g., cloud cost/transaction, API latency, data quality, incident response time, control compliance)**. Finalize the 'Benefits Review Plan' (PRINCE2) to continuously track ROI, including security-related cost savings from reduced incidents. Conduct regular 'Internal Audits' and 'Management Reviews' of the ISMS (ISO 27001), initiating 'Corrective Actions' for non-conformities and driving 'Continual Improvement'. Formally 'Close the Program' (PMP/PRINCE2), conduct 'Lessons Learned' (PMP), and update the 'Enterprise Architecture Repository' (EA) with target state documentation, new standards, and **ISMS documentation**.",
                    outcomeBriefing: "Absolutely perfect! This action encapsulates the full power of collaborative cross-framework EA knowledge, with ISO 27001 deeply integrated throughout. The 'Architecture Review Board' (EA) ensures ongoing architectural integrity. Six Sigma's 'Control Plan' and KPIs ensure continuous monitoring of both operational and **security performance**. PRINCE2's 'Benefits Review Plan' guarantees long-term value, including quantifiable security benefits. **ISO 27001's internal audits, management reviews, corrective actions, and continual improvement cycle are fundamental to maintaining and enhancing the ISMS and overall security posture.** PMP's formal program closure and 'Lessons Learned' capture invaluable organizational knowledge. Updating the 'EA Repository' ensures the new, secure architecture is a living, governed asset. This integrated approach ensures sustainability, maximizes value, **and secures OmniCorp's digital future**.",
                    nextStepId: "end"
                },
                {
                    text: "Declare the transformation complete and move on, assuming the new architecture will naturally govern itself and deliver benefits without ongoing oversight, formal closeout, or any continuous monitoring of information security effectiveness.",
                    outcomeBriefing: "This is a critical failure point in any transformation. Without ongoing EA Governance, the new architecture will decay. Without Six Sigma's Control Plan, performance will degrade. Without PMP's formal closure and lessons learned, valuable insights are lost. Without PRINCE2's Benefits Review Plan, the strategic value is never fully confirmed. **Most critically, ignoring ISO 27001's requirements for ISMS maintenance, internal audits, and continual improvement will lead to the rapid degradation of OmniCorp's information security posture, making it vulnerable to new threats, potentially leading to non-compliance, and undermining all the investment in the 'Digital Renaissance 2030' program.** This approach completely neglects the 'Control' phase, leading to unsustainable gains and significant long-term risks.",
                    nextStepId: "end"
                }
            ]
        },
        "end": {
            focus: "Simulation Complete: Mastery of Collaborative Cross-Framework EA Transformation (with ISO 27001)!",
            briefing: "Congratulations! You have successfully navigated OmniCorp's 'Digital Renaissance 2030' by expertly leveraging the integrated power of Enterprise Architecture, Six Sigma's DMAIC, PMP's program management, PRINCE2's robust governance, **and ISO 27001's Information Security Management System requirements**. You now possess a 'Gigantic Collaborative Cross-Framework Knowledge' essential for leading complex enterprise-level transformations securely!",
            animatedSequence: [
                {
                    staticNetwork: `
                  ┌───────────────────────────────────────────────────────────┐
                  │           ENTERPRISE ARCHITECTURE (EA) OVERVIEW         │
                  │ (Business, Data, Application, Technology Layers)          │
                  │   Successfully guided "Digital Renaissance 2030"        │
                  └───────────────┬───────────────────────┬───────────────────┘
                                  │                       │
          ┌───────────────────────V───────────────────────V───────────────────────┐
          │                                                                       │
          │  PRINCE2 GOVERNANCE             PMP PROGRAM MANAGEMENT        SIX SIGMA DMAIC        │
          │ (Strategic Oversight, Bus Just., (Scope, Schedule, Resources, (Data-Driven Process  │
          │  Controlled Stages, Benefits)    Stakeholders, Risks)       Improvement, Metrics)  │
          └───────────────────────┬───────────────────────┬───────────────────────┘
                                  │                       │
                                  V                       V
                      ┌───────────────────────────────────────────────────┐
                      │        [ISO 27001: INFORMATION SECURITY]          │
                      │ (ISMS Scope, Policy, Risk Mgmt, Controls, Continual Improvement)│
                      └───────────────────────────────────────────────────┘
                                  │
                                  V
                      ┌───────────────────────────────────────────────────┐
                      │    INTEGRATED EA TRANSFORMATION LIFECYCLE         │
                      │ (Vision, Current State, Target State, Roadmap, Governance) │
                      └───────────────────────────────────────────────────┘
    
    🏆 YOU'VE ACHIEVED GIGANTIC COLLABORATIVE CROSS-FRAMEWORK & EA KNOWLEDGE (WITH ISO 27001)! 🏆
    
                     Powered by Gemini`,
                    description: "A final overview of the fully integrated ecosystem, demonstrating how Enterprise Architecture, Six Sigma, PMP, PRINCE2, and ISO 27001 combine to deliver unparalleled strategic transformation, sustained organizational value, and robust information security.",
                    duration: 5000
                }
            ],
            task: "Thank you for participating in this advanced simulator. Your ability to integrate and apply these powerful frameworks within an Enterprise Architecture context, **including a strong focus on information security**, will drive profound and lasting value in any organization!",
            choices: []
        }
    };

    // --- SIMULATOR ENGINE ---
    let currentStepId = "start";
    let mainAnimationTimeout;

    const frameworkFocusEl = document.getElementById('framework-focus');
    const briefingEl = document.getElementById('briefing');
    const networkEl = document.getElementById('network-animation');
    const stepDescriptionEl = document.getElementById('step-description');
    const taskEl = document.getElementById('task');
    const choicesEl = document.getElementById('choices');
    const interactionAreaEl = document.getElementById('interaction-area');
    const waitingMessageEl = document = document.getElementById('waiting-message');
    const briefingTitleEl = document.querySelector('.section-title.briefing-title');
    const taskTitleEl = document.querySelector('.section-title.task-title');


    function stopCurrentAnimations() {
        clearTimeout(mainAnimationTimeout);
    }

    async function animateSequence(sequence) {
        stopCurrentAnimations(); // Clear any running animations
        interactionAreaEl.style.display = 'none';
        waitingMessageEl.style.display = 'block';

        for (let i = 0; i < sequence.length; i++) {
            const frame = sequence[i];
            stepDescriptionEl.textContent = frame.description;
            stepDescriptionEl.style.display = 'flex';

            if (frame.staticNetwork) {
                networkEl.textContent = frame.staticNetwork;
                await new Promise(resolve => mainAnimationTimeout = setTimeout(resolve, frame.duration));
            }
        }

        waitingMessageEl.style.display = 'none';
        interactionAreaEl.style.display = 'block';
    }

    async function displayStep(stepId) {
        const step = scenarioSteps[stepId];
        if (!step) {
            console.error("Step not found:", stepId);
            return;
        }

        currentStepId = stepId;

        stopCurrentAnimations(); // Ensure all previous animations are stopped

        // Reset elements
        stepDescriptionEl.style.display = 'none';
        stepDescriptionEl.innerHTML = '';
        choicesEl.innerHTML = '';
        interactionAreaEl.style.display = 'none';
        taskEl.className = 'task'; // Reset class for task
        briefingTitleEl.style.display = 'block';
        taskTitleEl.style.display = 'block';


        // Populate initial step content
        frameworkFocusEl.textContent = step.focus;
        briefingEl.textContent = step.briefing;
        taskEl.textContent = step.task;

        if (stepId === "end") {
            briefingTitleEl.style.display = 'none'; // Hide briefing title for final message
            briefingEl.style.display = 'none'; // Hide briefing content for final message
            taskTitleEl.style.display = 'none';
            choicesEl.style.display = 'none';
            taskEl.className = 'final-message';
        } else {
            briefingEl.style.display = 'flex';
            choicesEl.style.display = 'flex';
        }

        // Run the animated sequence
        await animateSequence(step.animatedSequence);

        // After animation, set up choices
        if (step.choices && step.choices.length > 0) {
            step.choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.textContent = choice.text;
                button.addEventListener('click', () => handleChoice(choice));
                choicesEl.appendChild(button);
            });
        }
    }

    function handleChoice(selectedChoice) {
        // Display the outcome briefing in the stepDescription area
        stepDescriptionEl.innerHTML = selectedChoice.outcomeBriefing;
        stepDescriptionEl.style.display = 'flex';

        // Disable all choice buttons
        Array.from(choicesEl.children).forEach(button => button.disabled = true);
        
        // Prepare for next step
        const nextStepId = selectedChoice.nextStepId;
        if (nextStepId) {
            // Add a small delay for user to read outcome, then go to next step
            setTimeout(() => {
                displayStep(nextStepId);
            }, 5000); // 5 seconds to read outcome and explanation
        }
    }

    // --- START SIMULATION ---
    displayStep(currentStepId);

</script>
</body>
</html>
